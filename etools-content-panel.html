<link rel="import" href="../polymer/polymer.html">

<link rel="import" href="../paper-material/paper-material.html">
<link rel="import" href="../paper-toolbar/paper-toolbar.html">
<link rel="import" href="../paper-icon-button/paper-icon-button.html">
<link rel="import" href="../iron-collapse/iron-collapse.html">


<!--
`etools-content-panel`

A simple panel with header to display a collapsible content.

### Styling

You can use defined variables and mixins to change panel style.

Custom property | Description | Default
----------------|-------------|----------
`--ecp-header-height` | Header height | `48px`
`--ecp-header-bg` | Header background color | `#1e86bf`
`--ecp-header-title` | Mixin applied to the header title | `{}`
`--ecp-expand-btn` | Mixin applied to expand content utton | `{}`
`--ecp-header-disabled` | Mixin applied to header when it's disabled | `{}`
`--ecp-content` | Mixin applied to content | `{}`
`--ecp-disabled-color` | Content disabled color | `#d1d1d1`
`--epc-toolbar-content` | Mixin applied to toolbar content | `{}`
`--epc-toolbar` | Mixin applied to paper-toolbar element | `{}`

@demo demo/index.html
-->

<dom-module id="etools-content-panel">
  <template>
    <style>
      :host {
        display: block;

        --paper-toolbar-height: var(--ecp-header-height, 48px);
        --paper-toolbar-background: var(--ecp-header-bg, #1e86bf);
        --paper-toolbar-title: {
            text-align: center;
            margin-left: 0;
            @apply(--ecp-header-title);
        };
      }

      *[hidden] {
        display: none !important;
      }

      paper-toolbar paper-icon-button {
        @apply(--ecp-expand-btn);
      }

      paper-toolbar {
        --paper-toolbar: {
          @apply(--epc-toolbar);
        };
        --paper-toolbar-content: {
          @apply(--epc-toolbar-content);
        }
      }

      .disabled paper-toolbar {
        opacity: 0.5;
        @apply(--ecp-header-disabled);
      }

      #content-wrapper {
        background-color: var(--ecp-content-bg-color, #ffffff);
        box-sizing: border-box;
        padding: 20px;
        @apply(--ecp-content);
      }

      .disabled iron-collapse ::slotted(*) {
        color: var(--ecp-disabled-color, #d1d1d1);
      }

    </style>

    <paper-material elevation="[[elevation]]" class$="[[_getDisabledClass(isDisabled)]]">
      <paper-toolbar hidden$="[[noHeader]]">
        <paper-icon-button on-click="_toggle"
                           icon$="[[_getExpandBtnIcon(open)]]"
                           hidden$="[[!showExpandBtn]]"
                           disabled$="[[isDisabled]]"></paper-icon-button>
        <div class="title">[[panelTitle]]</div>
      </paper-toolbar>
      <iron-collapse opened="{{open}}">
        <div id="content-wrapper">
          <slot></slot>
        </div>
      </iron-collapse>
    </paper-material>

  </template>

  <script>
    (function () {
      'use strict';

      Polymer({
        is: 'etools-content-panel',

        properties: {
          panelTitle: {
            type: String,
            value: 'Panel title'
          },
          elevation: {
            type: Number,
            value: 1
          },
          open: {
            type: Boolean,
            value: true,
            notify: true
          },
          noHeader: {
            type: Boolean,
            value: false
          },
          isDisabled: {
            type: Boolean,
            value: false
          },
          showExpandBtn: {
            type: Boolean,
            value: false
          }
        },
        _getDisabledClass: function(disabled) {
          if (disabled === true) {
            return 'disabled';
          }
          return '';
        },
        _toggle: function() {
          this.set('open', !this.open);
        },
        _getExpandBtnIcon: function(open) {
          if (!open) {
            return 'icons:expand-more';
          }
          return 'icons:expand-less';
        }

      });
    })();
  </script>
</dom-module>
